---
title: "[Java] Thread ê¸°ì´ˆ"
tags: 
    - Study
    - Java
categories:
    - Java
---

## 1. ìŠ¤ë ˆë“œì˜ ê°œë…
{% include figure path='/assets/images/ghost_images/2023/01/image-9.png' caption='ìš´ì˜ì²´ì œ - í”„ë¡œì„¸ìŠ¤ì˜ ê°œë… ë„ì‹' %}
ì •ì ì¸ í”„ë¡œê·¸ë¨ì´ ìì›(CPUë‚˜ ë©”ëª¨ë¦¬)ì„ ì–»ì–´ ì‹¤í–‰ ì¤‘ì— ë“¤ì–´ê°„ ê²ƒì„ í”„ë¡œì„¸ìŠ¤ë¼ í•˜ë©°, ëª¨ë“  í”„ë¡œê·¸ë¨ì€ ê¸°ë³¸ì ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ ë‹¨ìœ„ë¡œ ì‹¤í–‰ëœë‹¤. ìŠ¤ë ˆë“œëŠ” í”„ë¡œì„¸ìŠ¤ ë‚´ì˜ ì‘ì€ ì‹¤í–‰ ë‹¨ìœ„ì´ë©° í”„ë¡œì„¸ìŠ¤ëŠ” í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë¡œ êµ¬ì„±ë˜ê±°ë‚˜ ì—¬ëŸ¬ ê°œì˜ ì‘ì€ ìŠ¤ë ˆë“œë¡œ êµ¬ì„±ë  ìˆ˜ ìˆë‹¤.

JAVA í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰ì‹œí‚¤ë©´ JVM ìƒì— ìë™ìœ¼ë¡œ ìŠ¤ë ˆë“œê°€ í•˜ë‚˜ ìƒì„±ë˜ê³  ì´ë¥¼ â€˜ë©”ì¸ ìŠ¤ë ˆë“œâ€™ ë¼ í•œë‹¤. ë©”ì¸ ìŠ¤ë ˆë“œ ë‚´ì—ì„œ ì—¬ëŸ¬ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ê±°ë‚˜ ì‹¤í–‰í•  ìˆ˜ ìˆê³ , ëª¨ë“  ìŠ¤ë ˆë“œëŠ” ìš°ì„ ìˆœìœ„(priority)ë¥¼ ê°€ì§€ëŠ”ë°, ì²˜ìŒì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ìì‹ ì„ ìƒì„±í•œ ìŠ¤ë ˆë“œì™€ ë™ì¼í•œ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§€ê³  ìƒì„±ëœë‹¤. ê° ìŠ¤ë ˆë“œ ë³„ ìš°ì„ ìˆœìœ„ë¥¼ ì„ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ë„ ìˆë‹¤. ì´ë•Œ ìŠ¤ë ˆë“œë¥¼ ì¶”ìƒí™” í•œ Thread í´ë˜ìŠ¤ë¥¼ ì´ìš©í•œë‹¤.

## 2. ìŠ¤ë ˆë“œ í´ë˜ìŠ¤
ë‹¤ìŒì€ ìë°” ìŠ¤ë ˆë“œ í´ë˜ìŠ¤ ë‚´ë¶€ì˜ ì£¼ìš” ìƒìˆ˜ì™€ ìƒì„±ì, ê·¸ë¦¬ê³  ë©”ì„œë“œë¥¼ ì‚´í´ë³´ì.

### 2-1. ì£¼ìš” ìƒìˆ˜
```java
/* ìŠ¤ë ˆë“œì˜ ë°ëª¬ ì—¬ë¶€ */
private boolean daemon = false;

/* ìŠ¤ë ˆë“œì˜ ìƒíƒœ */
private volatile int threadStatus;

/* ìŠ¤ë ˆë“œ ìš°ì„ ìˆœìœ„ ìµœì†Œê°’ */
public static final int MIN_PRIORITY = 1;

/* ìŠ¤ë ˆë“œ ìš°ì„ ìˆœìœ„ ê¸°ë³¸ê°’ */
public static final int NORM_PRIORITY = 5;

/* ìŠ¤ë ˆë“œ ìš°ì„ ìˆœìœ„ ìµœëŒ€ê°’ */
public static final int MAX_PRIORITY = 10;
```
### 2-2. ì£¼ìš” ìƒì„±ì
```java
/**
* 1. ìŠ¤ë ˆë“œ ê·¸ë£¹
* 2. Runnable Interface ë¥¼ ìƒì†ë°›ëŠ” ì‹¤í–‰ ëŒ€ìƒ
* 3. ìŠ¤ë ˆë“œ ë„¤ì„ (ê¸°ë³¸ ê°’ìœ¼ë¡œ "Thread-" + nextThreadNum() í˜•ì‹ì„ ê°€ì§„ë‹¤
*/
public Thread(ThreadGroup group, Runnable target, String name) {
    this(group, target, name, 0);
}
```
### 2-3. ì£¼ìš” ë©”ì„œë“œ
```java
//í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ìŠ¤ë ˆë“œê°€ this ìŠ¤ë ˆë“œë¥¼ ì œì–´í•  ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.
//ì—†ë‹¤ë©´ SecurityException ì„ ë°˜í™˜í•œë‹¤.
public final void checkAccess() {...}

//this ìŠ¤ë ˆë“œì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì„¤ì •í•œë‹¤.
public final void setPriority(int newPriority) {...}

//ì‹¤í–‰ ì¤‘ë‹¨ìƒíƒœì— ìˆëŠ” this ìŠ¤ë ˆë“œë¥¼ ê¹¨ìš´ë‹¤.
public void interrupt() {...}

//this ìŠ¤ë ˆë“œê°€ ì¢…ë£Œë  ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦¬ê±°ë‚˜ ì§€ì •ëœ ì‹œê°„(milllis) ë§Œí¼ ê¸°ë‹¤ë¦°ë‹¤.
public final synchronized void join() throws InterreptedException {...}
public final synchronized void join(long millis) throws InterreptedException {...}

//í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ìŠ¤ë ˆë“œë¥¼ ì¼ì‹œì ìœ¼ë¡œ ë©ˆì¶”ê²Œ í•´ì„œ ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ì‹¤í–‰ë˜ë„ë¡ í•œë‹¤.
public static void yeild() {...} 

//í˜„ì¬ ìŠ¤ë ˆë“œë¥¼ ì§€ì •ëœ ì‹œê°„(millis) ë§Œí¼ ì‹¤í–‰ì„ ë©ˆì¶˜ë‹¤. 
public static void sleep(long millis) {...}
```
### 2-4. Object í´ë˜ìŠ¤ì˜ ìŠ¤ë ˆë“œ ê´€ë ¨ ì£¼ìš” ë©”ì„œë“œ
```java
//í˜„ì¬ ìŠ¤ë ˆë“œë¥¼ ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ notify() í˜¹ì€ notifyAll() ì„ í˜¸ì¶œí• ë•Œê¹Œì§€ ëŒ€ê¸°ì‹œí‚¨ë‹¤.
public final native void wait() throws InterruptedException;
public final native void wait(long timeoutMillis) throws InterruptedException;

//ëŒ€ê¸°ì¤‘ì¸ ìŠ¤ë ˆë“œë¥¼ í•˜ë‚˜ í˜¹ì€ ëª¨ë‘ ê¹¨ìš´ë‹¤.
public final native void notify();
public final native void notifyAll();
```
## 3. ìŠ¤ë ˆë“œì˜ ìƒì„±
ìŠ¤ë ˆë“œì˜ ìƒì„±ì—ëŠ” ë‘ ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤. `Thread` í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ê±°ë‚˜ `Runnable` ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ë¡œ ìƒì„±í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤. JAVAëŠ” ë‹¤ì¤‘ìƒì†ì´ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ìœ¼ë©´ì„œ ìŠ¤ë ˆë“œë¡œ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” `Runnable` ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ë¡œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

### 3-1. Thread í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ê¸°
```java
class Scratch {

    public static void main(String[] args)  {

        MyThread thread = new MyThread();
        // 3.start() ë©”ì„œë“œë¥¼ í†µí•´ ì‹¤í–‰í•œë‹¤.
        thread.start();
    }	
}

//1. Thread í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ëŠ” í´ë˜ìŠ¤ë¥¼ ì •ì˜í•œë‹¤.
class MyThread extends Thread {

    // 2. run() ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•œë‹¤.
    @Override
    public void run() {

        for (int i = 0; i < 10; i++) {
            System.out.println("[" + this.getName() + "]i = " + i);
        }
    }
}
```
### 3-2. Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê¸°
```java
class Scratch {

    public static void main(String[] args)  {

        // 3.Runnable ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ Thread í´ë˜ìŠ¤ë¥¼ ìƒì„±í•œë‹¤
        Thread thread = new Thread(new MyThread());
        // 4.start() ë©”ì„œë“œë¥¼ í†µí•´ ì‹¤í–‰í•œë‹¤.
        thread.start();
    }
}

//1. Runnable ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ë¡œ ìƒì„±í•œë‹¤.
class MyThread implements Runnable {

    // 2. run() ë©”ì„œë“œë¥¼ ì¬ì •ì˜í•œë‹¤.
    @Override
    public void run() {
        for (int i = 0; i < 10; i++) {
            System.out.println("i = " + i);
        }
    }
}
```

{% include figure path='/assets/images/ghost_images/2023/01/image-10.png' caption='1ë²ˆê³¼ 2ë²ˆì— ëŒ€í•œ ì‹¤í–‰ ê²°ê³¼' %}

### 3-EX. Thread ë©”ì„œë“œì˜ start() ë©”ì„œë“œë¥¼ í†µí•´ì„œë§Œ ì‹¤í–‰ì‹œì¼œì•¼ í•˜ëŠ” ì´ìœ 
`Runnable` ì¸í„°í˜ì´ìŠ¤ì˜ `run()` ë©”ì„œë“œë¥¼ ì§ì ‘ ì‹¤í–‰ì‹œí‚¤ì§€ ì•ŠëŠ” ì´ìœ ëŠ” `Thread` ê°ì²´ì˜ `start()` ë©”ì„œë“œë¥¼ í†µí•´ì„œë§Œ JVMì´ ìƒˆë¡œìš´ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ê³  `run()` ë©”ì„œë“œ ì˜ì—­ì˜ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ê¸° ë•Œë¬¸ì´ë‹¤.

ê·¸ëƒ¥ `run()` ë©”ì„œë“œë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤ë©´ ìƒˆë¡œìš´ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ì§€ ì•Šê³  ì‹±ê¸€ ìŠ¤ë ˆë“œ ì˜ì—­ì—ì„œ `run()` ë©”ì„œë“œì˜ ë‚´ìš©ë§Œì„ ì‹¤í–‰ì‹œí‚¨ë‹¤.

```java
class Scratch {

    public static void main(String[] args)  {

        MyThread thread1 = new MyThread();
        thread1.run();

        MyThread thread2 = new MyThread();
        thread2.run();

        System.out.println("===== main end =====");
    }
}

class MyThread implements Runnable {

    @Override
    public void run() {
        for (int i = 1; i <= 3; i++) {
            System.out.println("[" + Thread.currentThread().getName() + "] i = " + i);
        }
    }
}
```

{% include figure path='/assets/images/ghost_images/2023/01/image-11.png' caption='ë³‘ë ¬ì²˜ë¦¬ê°€ ë˜ì§€ ì•Šê³  ë©”ì¸ìŠ¤ë ˆë“œì—ì„œ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ê³  ìˆë‹¤.' %}

## 4. ìŠ¤ë ˆë“œì˜ ìƒíƒœ
ë‹¤ìŒì€ ìŠ¤ë ˆë“œê°€ ìƒì„±ë˜ê³  CPUì˜ ìì›ì„ ì–»ì–´ ì‹¤í–‰ ëœ í›„, ì¢…ë£Œ ìƒíƒœì— ì´ë¥´ê¸°ê¹Œì§€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ìƒíƒœë“¤ì´ë‹¤.

### 4-1. Startable ìƒíƒœ
Thread í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ì—¬ ê°ì²´ë¥¼ ìƒì„±í•œ ìƒíƒœì´ë‹¤. ì¦‰, start() ë©”ì„œë“œ í˜¸ì¶œ ë°”ë¡œ ì§ì „ì˜ ìƒíƒœì´ë‹¤. ëª¨ë“  ìŠ¤ë ˆë“œëŠ” Startable ìƒíƒœì—ì„œë§Œ Runnable ìƒíƒœë¡œ ë„˜ì–´ê°ˆ ìˆ˜ ìˆë‹¤.

{% include figure path='/assets/images/ghost_images/2023/01/image-12.png' caption='ìŠ¤ë ˆë“œì˜ ìƒíƒœ ë„ì‹' %}

### 4-2. Runnable ìƒíƒœ
Running ìƒíƒœì˜ ë°”ë¡œ ì§ì „ ìƒíƒœì´ê³ , ì‹¤í–‰ì„ ìœ„í•œ ëª¨ë“  ì¤€ë¹„ê°€ ëë‚¬ìœ¼ë©° CPU ìì›ë§Œ ì–»ìœ¼ë©´ ë°”ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ìƒíƒœë¥¼ ì˜ë¯¸í•œë‹¤.

### 4-3. Running ìƒíƒœ
ìŠ¤ë ˆë“œì— ì •ì˜ëœ run() ë©”ì†Œë“œê°€ ì‹¤ì œë¡œ ì‹¤í–‰ë˜ê³  ìˆëŠ” ìƒíƒœì´ë‹¤.

### 4-4. Not Running ìƒíƒœ
Running ìƒíƒœì—ì„œ CPU ìì›ì„ ìƒì–´ ì‹¤í–‰ì´ ì¤‘ë‹¨ëœ ìƒíƒœì´ë‹¤. ì‹¤í–‰ì„ ì¤‘ë‹¨ì‹œí‚¤ëŠ” ë°©ë²•ì€ ìŠ¤ìŠ¤ë¡œ Thread í´ë˜ìŠ¤ì˜ sleep() ë©”ì„œë“œë‚˜ Object í´ë˜ìŠ¤ì˜ wait() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ë‹¤.

### 4-5. Dead ìƒíƒœ
ìŠ¤ë ˆë“œê°€ ì¢…ë£Œëœ ìƒíƒœë¥¼ ì˜ë¯¸í•œë‹¤. ì¢…ë£Œëœ ìŠ¤ë ˆë“œê°€ ë‹¤ì‹œ ì‹œì‘í•˜ë ¤ë©´ ë°˜ë“œì‹œ Startable ìƒíƒœë¥¼ ê±°ì³ì•¼ í•œë‹¤.

## 5. ìŠ¤ë ˆë“œì˜ ì œì–´
ìŠ¤ë ˆë“œì˜ ì œì–´ëŠ” ìŠ¤ë ˆë“œì˜ ìƒíƒœë¥¼ ë³€ê²½ì‹œí‚¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ìŠ¤ë ˆë“œë¥¼ ì œì–´í•  ë•Œ ì£¼ì˜ì ì€ ê°€ê¸‰ì  ìŠ¤ë ˆë“œë¥¼ ì§ì ‘ ì¢…ë£Œì‹œí‚¤ëŠ” ê²ƒì„ í”¼í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

### 5-1. ìš°ì„ ìˆœìœ„ë¥¼ í†µí•œ ì œì–´

ì ˆëŒ€ì ì¸ ë™ì‘ ìˆœì„œë¥¼ ë³´ì¥í•˜ì§€ëŠ” ì•Šì§€ë§Œ ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ìŠ¤ë ˆë“œëŠ” ë‚®ì€ ìŠ¤ë ˆë“œì— ë¹„í•´ ìƒëŒ€ì ìœ¼ë¡œ CPU ìì›ì„ ì–»ì„ ìˆ˜ ìˆëŠ” í™•ë¥ ì´ ë†’ìœ¼ë¯€ë¡œ ìš°ì„ ìˆœìœ„ë¥¼ í†µí•´ ì œì–´í•  ìˆ˜ ìˆë‹¤.

```java
class Scratch {
    public static void main(String[] args) {

        Thread threadMIN = new Thread(new MyThread("MIN"));
        Thread threadNORM = new Thread(new MyThread("NORM"));
        Thread threadMAX = new Thread(new MyThread("MAX"));

        //ìš°ì„ ìˆœìœ„ ë‚®ìŒ
        threadMIN.setPriority(Thread.MIN_PRIORITY);
        //ìš°ì„ ìˆœìœ„ ì¤‘ê°„
        threadNORM.setPriority(Thread.NORM_PRIORITY);
        //ìš°ì„ ìˆœìœ„ ë†’ìŒ
        threadMAX.setPriority(Thread.MAX_PRIORITY);

        threadMIN.start();
        threadNORM.start();
        threadMAX.start();
    }
}

class MyThread implements Runnable {

    private String threadName;

    public MyThread(String threadName) {
        this.threadName = threadName;
    }

    @Override
    public void run() {
        for (int i = 1; i <= 100; i++) {
        }
        System.out.println("[" + threadName + "] END");
    }
}
```
{% include figure path='/assets/images/ghost_images/2023/01/image-13.png' caption='ë°˜ë“œì‹œ ìœ„ ìˆœì„œëŒ€ë¡œ ì‘ë™ì„ ë³´ì¥í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.' %}

### 5-2. Thread í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œë¥¼ í†µí•œ ì œì–´
Thread í´ë˜ìŠ¤ì˜ yield(), join(), interrupt() , sleep() ë©”ì„œë“œë¥¼ ì´ìš©í•˜ì—¬ ìŠ¤ë ˆë“œë¥¼ ì œì–´í•  ìˆ˜ ìˆë‹¤.

**yield()** ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì•„ì£¼ ì§§ì€ ì‹œê°„ë™ì•ˆ ìŠ¤ë ˆë“œê°€ Runnable ìƒíƒœë¡œ ë“¤ì–´ê°€ì„œ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì— CPUë¥¼ ì–‘ë³´í•œë‹¤.
```java
class Scratch {

    public static void main(String[] args)  {

        Thread thread1 = new Thread(new MyThread(), "thd1");
        Thread thread2 = new Thread(new MyThread(), "thd2");

        thread1.start();
        thread2.start();
    }
}

class MyThread implements Runnable {

    @Override
    public void run() {

        String threadName = Thread.currentThread().getName();

        for (int i = 1; i <= 100; i++) {
            System.out.print("[" + threadName + "] ");
            if (threadName.equals("thd1")) Thread.yield();
        }
    }
}
```
{% include figure path='/assets/images/ghost_images/2023/01/image-14.png' caption='ë¹„êµì (?) ê· ë“±í•˜ê²Œ êµì°¨ë˜ê³  ìˆë‹¤.' %}

**join()** ë©”ì„œë“œë¥¼ ì´ìš©í•˜ëŠ” ê²½ìš° íŠ¹ì • ìŠ¤ë ˆë“œê°€ ëë‚  ë•Œê¹Œì§€ ìŠ¤ë ˆë“œë¥¼ ëë‚´ì§€ ì•Šê³  ë©ˆì¶”ê²Œ í•  ìˆ˜ ìˆë‹¤. join() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ë•Œì—ëŠ” `InterruptedException` ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•´ ì£¼ì–´ì•¼ í•œë‹¤.

```java
class Scratch {

    public static void main(String[] args) throws InterruptedException {

        Thread thread1 = new Thread(new MyThread(), "thd1");
        Thread thread2 = new Thread(new MyThread(), "thd2");

        thread1.start();
        thread2.start();

        thread1.join();
        thread2.join();

        System.out.println("==== main end ====");
    }
}

class MyThread implements Runnable {

    @Override
    public void run() {
        String threadName = Thread.currentThread().getName();
        for (int i = 1; i <= 5; i++) {
            System.out.println("[" + threadName + "] ");
        }
    }
}
```

{% include figure path='/assets/images/ghost_images/2023/01/image-15.png' caption='join() ë©”ì„œë“œì˜ ì‚¬ìš© ê²°ê³¼' %}

ì´ë²ˆì—ëŠ” íŠ¹ì • ìŠ¤ë ˆë“œë¥¼ ê¸°ë‹¤ë¦¬ê²Œ í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ëŒ€ê¸°ìƒíƒœì— ìˆëŠ” ìŠ¤ë ˆë“œë¥¼ ê¹¨ìš°ëŠ”(Not Running â†’ Running) interrupt() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë¥¼ ì‚´í´ë³´ì.

```java
class Scratch {

    public static void main(String[] args) throws InterruptedException {

        MyThread thread1 = new MyThread("thread1");
        MyThread thread2 = new MyThread("thread2");
        MyThread thread3 = new MyThread("thread3");

        thread1.setNextThread(thread2);
        thread2.setNextThread(thread3);
        thread3.setNextThread(thread1);

        thread1.start();
        thread2.start();
        thread3.start();

        try {
            //InterruptedException ì„ ë°œìƒì‹œí‚¨ë‹¤.
            thread1.interrupt();
            thread1.join();
            thread2.join();
            thread3.join();
        } catch (InterruptedException e) {
            System.out.println(e);
        }

        System.out.println("===== main end =====");
    }
}

class MyThread extends Thread {

    private Thread nextThread;

    public MyThread(String threadName) {
        super(threadName);
    }

    @Override
    public void run() {
        String threadName = Thread.currentThread().getName();
        for (int i = 0; i < 10; i++) {
            try {
                Thread.sleep(1000000);
            } catch(InterruptedException e) {
                System.out.print("[" + threadName + "] -> ");
                //ë‹¤ìŒ ìŠ¤ë ˆë“œë¥¼ ê¹¨ìš´ë‹¤.
                if(nextThread.isAlive()) nextThread.interrupt();
            }
        }
    }

    public void setNextThread(Thread nextThread) {
        this.nextThread = nextThread;
    }
}
```
ìœ„ì˜ ì½”ë“œëŠ” sleep ìƒíƒœì— ìˆëŠ” ìŠ¤ë ˆë“œë¥¼ ìˆœì°¨ì ìœ¼ë¡œ interrupt í•˜ë©´ì„œ ìŠ¤ë ˆë“œì˜ íë¦„ì„ ì œì–´í•˜ëŠ” ì½”ë“œì´ë‹¤.

{% include figure path='/assets/images/ghost_images/2023/01/image-16.png' caption='ë‹¤ìŒê³¼ ê°™ì´ ì¸ìœ„ì ìœ¼ë¡œ ìŠ¤ë ˆë“œ ì‹¤í–‰ ìˆœì„œë¥¼ ì œì–´í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.' %}

## 6. ìŠ¤ë ˆë“œ ë™ê¸°í™”
í•˜ë‚˜ì˜ ìì›ì„ ê³µìœ í•˜ëŠ” ì—¬ëŸ¬ ìŠ¤ë ˆë“œ ê°„ì— ë™ê¸°í™”ë¥¼ í•˜ì§€ ì•Šìœ¼ë©´ **ê°„ì„­ í˜„ìƒ**ì´ ë°œìƒí•œë‹¤. ê°„ì„­ í˜„ìƒì´ë€ ê³µìœ  ìì›ì˜ ì¼ê´€ì„±ì´ ê¹¨ì§€ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.

ê°„ë‹¨í•œ ì˜ˆë¡œ ê³µìœ  ìì›ì˜ ì¼ê´€ì„±ì´ ê¹¨ì§€ëŠ” ìƒí™©ì„ ì‚´í´ë³´ì.

```java
class Counter {
    
    private int c = 0;

    public void increment() {
        System.out.println("[" + Thread.currentThread().getName() + "] " + (++c));
    }
    public int getValue() {
        return c;
    }
}

class CounterRunner implements Runnable {

    private final Counter c;

    public CounterRunner(Counter c) {
        this.c = c;
    }

    public void run() {
        for (int i = 0; i < 5; i++) {
            try {
                Thread.sleep(500);
                c.increment();
            } catch (InterruptedException e) {
                throw new RuntimeException(e);
            }
        }
    }
}

public class Scratch {
    public static void main(String[] args) throws InterruptedException {

        Counter c = new Counter();
        Thread threadA = new Thread(new CounterRunner(c), "A");
        Thread threadB = new Thread(new CounterRunner(c), "B");

        threadA.start();
        threadB.start();

        threadA.join();
        threadB.join();

        System.out.println("c = " + c.getValue());
    }
}
```

ìŠ¤ë ˆë“œ ë‘ê°œê°€ í•˜ë‚˜ì˜ ê³µìœ  ìì›(Counter ê°ì²´)ì— ì ‘ê·¼í•´ ë³€ìˆ˜ì˜ ê°’ì„ ì¡°ì‘í•˜ê³  ìˆë‹¤. ì •ìƒì ìœ¼ë¡œ ê¸°ëŒ€í•  ìˆ˜ ìˆëŠ” ê°’ì€ ë‘ ìŠ¤ë ˆë“œê°€ ê°ê° ë‹¤ì„¯ ë²ˆì”© ê°ì²´ì˜ ê°’ì„ ì¦ê°€ì‹œì¼°ìœ¼ë¯€ë¡œ **10**ì´ì§€ë§Œ ì‹¤ì œ ê²°ê³¼ë¥¼ ë³´ì.

{% include figure path='/assets/images/ghost_images/2023/01/image-17.png' caption='ì˜ëª»ëœ ê²°ê³¼ 1' %}

{% include figure path='/assets/images/ghost_images/2023/01/image-18.png' caption='ì˜ëª»ëœ ê²°ê³¼ 2' %}

ê²°ê³¼ëŠ” ë§¤ë²ˆ ë‹¤ë¥´ì§€ë§Œ(ì •ìƒì ì¸ ê²°ê³¼ê°€ ë‚˜ì˜¬ë•Œë„ ìˆë‹¤), ì˜¬ë°”ë¥¸ ê²°ê³¼ë¥¼ ë³´ì¥í•˜ì§€ ëª»í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

ì´ë ‡ê²Œ ë³‘ë ¬ ìŠ¤ë ˆë“œê°„ì˜ ê°„ì„­ í˜„ìƒìœ¼ë¡œ ì¸í•´ ì¼ê´€ì„±ì„ í•´ì¹˜ëŠ” ë¬¸ì œë¥¼ **ë™ì‹œì„± ì´ìŠˆ(Concurrency Issue)ë¼ê³ ** í•œë‹¤. ê·¸ë¦¬ê³  ì´ëŸ¬í•œ ë™ì‹œì„± ì´ìŠˆë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ **synchronized** í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

`synchronized` í‚¤ì›Œë“œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë²”ìœ„ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

- ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ
- ì •ì  ë©”ì„œë“œ
- ì½”ë“œ ë¸”ë¡

JAVAëŠ” ë™ê¸°í™”ë¥¼ ìœ„í•´ **ëª¨ë‹ˆí„°**ë¼ëŠ” ë™ê¸°í™” ê¸°ë²•ì„ ì‚¬ìš©í•œë‹¤. ëª¨ë‹ˆí„° ê¸°ë²•ì€ ì‰½ê²Œ ë§í•˜ë©´ `synchronized`ë¡œ ì„ ì–¸ëœ ì˜ì—­ ë‚´ì—ëŠ” í•œ ë²ˆì— í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë§Œ ì§„ì…í•˜ë„ë¡ í—ˆìš©í•˜ëŠ” ê¸°ë²•ì´ë‹¤. ëª¨ë‹ˆí„°ì— íŠ¹ì • ìŠ¤ë ˆë“œê°€ ì§„ì…í•˜ë©´ ëª¨ë‹ˆí„° ë½ì„ íšë“í•˜ê³  ê·¸ ì™¸ì˜ ìŠ¤ë ˆë“œëŠ” íì—ì„œ ëŒ€ê¸°í•œë‹¤.

ìœ„ì˜ ì½”ë“œì— `synchronized` í‚¤ì›Œë“œë¥¼ ì ìš©í•´ë³´ì.

```java
// ...
// Counter.class
public synchronized void increment() {
    System.out.println("[" + Thread.currentThread().getName() + "] " + (++c));
}
// ...

// ...
// Counter.class
public void increment() {
    synchronized (this) {
        System.out.println("[" + Thread.currentThread().getName() + "] " + (++c));
    }
}
// ...
```

ë‹¤ìŒê³¼ ê°™ì´ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œ ì „ì²´ë¥¼ ë™ê¸°í™” ì˜ì—­ìœ¼ë¡œ ë§Œë“¤ê±°ë‚˜, íŠ¹ì • ì½”ë“œë§Œ ë™ê¸°í™” ì‘ì—…ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ë™ê¸°í™” ë¸”ëŸ­ì„ ë§Œë“¤ì–´ ì¤„ ìˆ˜ ìˆë‹¤. ë™ê¸°í™” ì˜ì—­ì„ ì§€ì •í•œ í›„ ì•ì„  ì½”ë“œë¥¼ ë‹¤ì‹œ í•œë²ˆ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì‹¤í–‰ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.

{% include figure path='/assets/images/ghost_images/2023/01/image-19.png' %}


## Refferences

1. ğŸ”—[Guide to the Synchronized Keyword in Java - Baeldung](https://www.baeldung.com/java-synchronized)
2. ğŸ”—[What is a Monitor in Computer Science? - Baeldung](https://www.baeldung.com/cs/monitor)
3. ğŸ”—[Guide to the Synchronized Keyword in Java - Baeldung](https://www.baeldung.com/java-synchronized)
4. ğŸ”—[ëª¨ë‹ˆí„°(ë™ê¸°í™”) - ìœ„í‚¤ë°±ê³¼](https://ko.wikipedia.org/wiki/%EB%AA%A8%EB%8B%88%ED%84%B0_(%EB%8F%99%EA%B8%B0%ED%99%94))
5. KNOU - JAVA í”„ë¡œê·¸ë˜ë° 11ê°• ë©€í‹° ìŠ¤ë ˆë“œ í”„ë¡œê·¸ë˜ë°
